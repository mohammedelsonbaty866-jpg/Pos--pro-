<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø£ØµÙ†Ø§Ù</title>

<!-- Ø³ØªØ§ÙŠÙ„ Ø¹Ø§Ù… -->
<style>
body{margin:0;font-family:Tahoma;background:#f4f6f9}
.sidebar{
  position:fixed;right:0;top:0;width:260px;height:100vh;
  background:linear-gradient(180deg,#0f1f3a,#142850);
  padding:12px;color:#fff
}
.menu-item{
  display:flex;align-items:center;gap:10px;
  background:#1b2d4a;padding:14px;border-radius:14px;
  margin-bottom:10px;cursor:pointer
}
.menu-item:hover{background:#284b8f}
.main{margin-right:260px;padding:20px}
.card{
  background:#fff;padding:15px;border-radius:14px;margin-bottom:15px
}
.row{display:flex;gap:10px;flex-wrap:wrap}
input,select,button{
  padding:10px;border-radius:10px;border:1px solid #ccc
}
button{
  background:#2f6df6;color:#fff;border:none;cursor:pointer
}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#eee}
h2{margin-top:0}
</style>
</head>

<body>

<!-- ========== MENU ========== -->
<div class="sidebar" id="sidebar">
  <div class="menu-item" onclick="go('sales.html')">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
  <div class="menu-item" onclick="go('products.html')">Ø§Ù„Ø£ØµÙ†Ø§Ù</div>
  <div class="menu-item" onclick="go('purchases.html')">Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
  <div class="menu-item" onclick="go('returns.html')">Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª</div>
  <div class="menu-item" onclick="go('customers.html')">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
  <div class="menu-item" onclick="go('suppliers.html')">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</div>
  <div class="menu-item" onclick="go('stock.html')">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
  <div class="menu-item" onclick="go('reports.html')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
  <div class="menu-item" onclick="go('settings.html')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
</div>

<!-- ========== CONTENT ========== -->
<div class="main">

<h2>Ø´Ø§Ø´Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h2>

<!-- Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ ØµÙ†Ù -->
<div class="card">
  <div class="row">
    <input id="prodName" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
    <select id="prodUnit">
      <option>ÙƒÙŠÙ„Ùˆ</option>
      <option>Ø¹Ù„Ø¨Ø©</option>
      <option>ÙƒØ±ØªÙˆÙ†Ø©</option>
      <option>Ø¨Ø§ÙƒÙŠØª</option>
    </select>
    <input id="prodPrice" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹">
    <input id="prodStock" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ø§Ù„Ù…Ø®Ø²Ù†">
  </div>
  <br>
  <button onclick="saveProduct()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
</div>

<!-- Ø¨Ø­Ø« -->
<div class="card">
  <input id="productSearch" placeholder="Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ Ø¹Ù† ØµÙ†Ù">
</div>

<!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù -->
<div class="card">
  <table>
    <thead>
      <tr>
        <th>Ø§Ù„ØµÙ†Ù</th>
        <th>Ø§Ù„ÙˆØ­Ø¯Ø§Øª / Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</th>
        <th>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>
        <th>ØªØ­ÙƒÙ…</th>
      </tr>
    </thead>
    <tbody id="productsTable"></tbody>
  </table>
</div>

</div>

<!-- ========== JS ========== -->
<script>
function go(page){ location.href = page; }
</script>

<script>
/************ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£ØµÙ†Ø§Ù ************/
let products = JSON.parse(localStorage.getItem("products")) || [];

const prodName  = document.getElementById("prodName");
const prodUnit  = document.getElementById("prodUnit");
const prodPrice = document.getElementById("prodPrice");
const prodStock = document.getElementById("prodStock");
const table     = document.getElementById("productsTable");
const searchInp = document.getElementById("productSearch");

function saveProduct(){
  const name  = prodName.value.trim();
  const unit  = prodUnit.value;
  const price = +prodPrice.value;
  const stock = +prodStock.value;

  if(!name || price<=0 || stock<0)
    return alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");

  let product = products.find(p=>p.name===name);
  if(!product){
    product={id:Date.now(),name,units:{}};
    products.push(product);
  }

  product.units[unit]={price,stock};
  localStorage.setItem("products",JSON.stringify(products));
  renderProducts();
  clearForm();
}

function renderProducts(filter=""){
  table.innerHTML="";
  products
    .filter(p=>p.name.includes(filter))
    .forEach(p=>{
      let u="",s="";
      for(let k in p.units){
        u+=`${k}: ${p.units[k].price}<br>`;
        s+=`${k}: ${p.units[k].stock}<br>`;
      }
      table.innerHTML+=`
        <tr>
          <td>${p.name}</td>
          <td>${u}</td>
          <td>${s}</td>
          <td>
            <button onclick="editProduct(${p.id})">âœï¸</button>
            <button onclick="deleteProduct(${p.id})">ğŸ—‘</button>
          </td>
        </tr>`;
    });
}
renderProducts();

function editProduct(id){
  const p = products.find(x=>x.id===id);
  if(!p)return;
  prodName.value=p.name;
  const u=Object.keys(p.units)[0];
  prodUnit.value=u;
  prodPrice.value=p.units[u].price;
  prodStock.value=p.units[u].stock;
}

function deleteProduct(id){
  if(!confirm("ØªØ£ÙƒÙŠØ¯ Ø­Ø°Ù Ø§Ù„ØµÙ†ÙØŸ"))return;
  products=products.filter(p=>p.id!==id);
  localStorage.setItem("products",JSON.stringify(products));
  renderProducts();
}

searchInp.addEventListener("input",e=>{
  renderProducts(e.target.value);
});

function clearForm(){
  prodName.value="";
  prodPrice.value="";
  prodStock.value="";
}
</script>

</body>
</html>
