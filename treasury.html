<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø®Ø²Ù†Ø©</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f5f6fa;
}

/* ===== Ø§Ù„Ù…Ù†ÙŠÙˆ ===== */
.sidebar{
  position:fixed;
  right:0;
  top:0;
  width:240px;
  height:100vh;
  background:#0f1f3a;
  padding:10px;
}
.menu-item{
  background:#1b2d4a;
  color:#fff;
  padding:12px;
  border-radius:10px;
  margin-bottom:8px;
  cursor:pointer;
}
.menu-item:hover{background:#284b8f;}
.menu-item.active{background:#2f6df6}

/* ===== Ø§Ù„ØµÙØ­Ø© ===== */
.page{
  margin-right:260px;
  padding:15px;
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:10px;
}
.card{
  background:#fff;
  border-radius:12px;
  padding:15px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
.card h3{margin:0;font-size:15px}
.card .value{font-size:20px;margin-top:8px}

input,select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

button{
  padding:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.btn-primary{background:#2f6df6;color:#fff}
.btn-success{background:#27ae60;color:#fff}
.btn-danger{background:#e74c3c;color:#fff}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #ddd;
  text-align:center;
  font-size:14px;
}
.in{color:green;font-weight:bold}
.out{color:red;font-weight:bold}
</style>
</head>

<body>

<!-- ===== Ø§Ù„Ù…Ù†ÙŠÙˆ ===== -->
<div class="sidebar">
  <div class="menu-item" onclick="go('sales.html')">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
  <div class="menu-item" onclick="go('purchases.html')">Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
  <div class="menu-item" onclick="go('suppliers.html')">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</div>
  <div class="menu-item" onclick="go('customers.html')">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
  <div class="menu-item active">Ø§Ù„Ø®Ø²Ù†Ø©</div>
  <div class="menu-item" onclick="go('reports.html')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
  <div class="menu-item" onclick="go('settings.html')">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
</div>

<div class="page">

<!-- ===== Ù…Ù„Ø®Øµ Ø§Ù„Ø®Ø²Ù†Ø© ===== -->
<div class="cards">
  <div class="card">
    <h3>ğŸ’° Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²Ù†Ø©</h3>
    <div class="value" id="balance">0</div>
  </div>
  <div class="card">
    <h3>â¬† Ø§Ù„Ù…Ù‚Ø¨ÙˆØ¶Ø§Øª</h3>
    <div class="value" id="totalIn">0</div>
  </div>
  <div class="card">
    <h3>â¬‡ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>
    <div class="value" id="totalOut">0</div>
  </div>
</div>

<!-- ===== Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ© ===== -->
<div class="card" style="margin-top:15px">
<h3>Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ© Ø®Ø²Ù†Ø©</h3>

<select id="type">
  <option value="in">Ù‚Ø¨Ø¶</option>
  <option value="out">ØµØ±Ù</option>
</select>

<input id="amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<input id="note" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†">

<button class="btn-primary" onclick="addTransaction()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø­Ø±ÙƒØ©</button>
</div>

<!-- ===== Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø±ÙƒØ§Øª ===== -->
<div class="card">
<h3>Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø®Ø²Ù†Ø©</h3>
<table>
<thead>
<tr>
<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
<th>Ø§Ù„Ù†ÙˆØ¹</th>
<th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
<th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
<th>Ø§Ù„Ø±ØµÙŠØ¯</th>
</tr>
</thead>
<tbody id="table"></tbody>
</table>
</div>

</div>

<script>
function go(p){location.href=p}

function get(k){return JSON.parse(localStorage.getItem(k))||[]}
function set(k,v){localStorage.setItem(k,JSON.stringify(v))}

function initTreasury(){
  let t=get("treasury")
  if(!t.balance){ set("treasury",{balance:0}) }
}
initTreasury()

document.addEventListener("DOMContentLoaded",render)

function render(){
  let treasury=get("treasury")
  let tx=get("treasuryTx")

  balance.innerText=treasury.balance.toFixed(2)

  let totalIn=0,totalOut=0,run=0
  table.innerHTML=""

  tx.forEach(t=>{
    if(t.type=="in") totalIn+=t.amount
    else totalOut+=t.amount

    run+=t.type=="in"?t.amount:-t.amount

    table.innerHTML+=`
      <tr>
        <td>${t.date}</td>
        <td class="${t.type}">${t.type=="in"?"Ù‚Ø¨Ø¶":"ØµØ±Ù"}</td>
        <td>${t.note}</td>
        <td>${t.amount}</td>
        <td>${run.toFixed(2)}</td>
      </tr>`
  })

  totalInEl.innerText=totalIn.toFixed(2)
  totalOutEl.innerText=totalOut.toFixed(2)
}

const totalInEl=document.getElementById("totalIn")
const totalOutEl=document.getElementById("totalOut")

function addTransaction(){
  let type=document.getElementById("type").value
  let amount=Number(document.getElementById("amount").value)
  let note=document.getElementById("note").value

  if(amount<=0) return alert("Ø§Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­")

  let treasury=get("treasury")
  let tx=get("treasuryTx")

  if(type=="out" && treasury.balance<amount){
    return alert("Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²Ù†Ø© Ù„Ø§ ÙŠÙƒÙÙŠ")
  }

  treasury.balance+= type=="in"?amount:-amount

  tx.push({
    id:Date.now(),
    type,
    amount,
    note,
    date:new Date().toLocaleString()
  })

  set("treasury",treasury)
  set("treasuryTx",tx)

  amount.value=""
  note.value=""

  render()
}
</script>

</body>
</html>
